<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="The sidebar navigation uses a jQuery component called Navgoco. The sidebar is a somewhat complex part of the theme that remembers your current page, highligh...">
<meta name="keywords" content="getting_started,  sidebar, accordion, yaml, iteration, for loop, navigation, attributes, conditional filtering">
<title>Sidebar Source  | CW - learn and develop morse</title>
<link rel="stylesheet" href="/CW/css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/CW/css/modern-business.css">
<link rel="stylesheet" href="/CW/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/CW/css/customstyles.css">
<link rel="stylesheet" href="/CW/css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/CW/js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/CW/js/toc.js"></script>
<script src="/CW/js/customscripts.js"></script>

<link rel="shortcut icon" type="image/x-icon" href="/CW/images/favicon.ico?">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://mjago.github.io/CW/CW/feed.xml">

 

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 700,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/CW/">&nbsp;<span class="projectTitle"> CW</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="/CW/news/">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Jekyll<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://talk.jekyllrb.com" target="_blank">Jekyll Talk</a></li>
                        
                        
                        
                        <li><a href="http://jekyllrb.com/docs/home/" target="_blank">Jekyll documentation</a></li>
                        
                        
                        
                        <li><a href="http://stackoverflow.com/questions/tagged/jekyll" target="_blank">Jekyll on Stack Overflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<!-- Send feedback function -->
<script>
function SendLinkByMail(href) {
var subject= "CW - learn and develop morse feedback";
var body = "I have some feedback about the Sidebar Source page: ";
body += window.location.href;
body += "";
var uri = "mailto:martyn.jago@btinternet.com?subject=";
uri += encodeURIComponent(subject);
uri += "&body=";
uri += encodeURIComponent(body);
window.location.href = uri;
}
</script>

<li><a href="javascript:(function()%7BSendLinkByMail()%3B%7D)()%3B" target="_blank"><i class="fa fa-envelope-o"></i> Feedback</a></li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/CW/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/CW/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Sidebar Source">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>
<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">CW 0.3.0</li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="/CW/">CW</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_release_notes/">Release notes</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_cw_script/">CW script</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_about/">About the author</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Tutorial</a>
        <ul>
            
            
            
            <li><a href="/CW/mydoc_learning_the_alphabet/">Learning the Alphabet</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_five_common_words/">Five Common Words</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_fixed_length_words/">Fixed Length Words</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_range_of_word_lengths/">Range of Word Lengths</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_letter_filtering/">Letter Filtering</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_letter_and_number_groups/">Letter and Number Groups</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_callsigns/">Callsigns</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_farnsworth_timing/">Farnsworth Timing</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_program_output/">Program Output</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_book_reading/">Book Reading</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_book_converting/">Book Converting</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_rss_feed/">RSS Feed Reading</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_reveal_mode/">Reveal Mode</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_cw_executable/">The cw executable</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_config_file/">Config file</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_ebook2cw/">Using ebook2cw</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Commands</a>
        <ul>
            
            
            
            <li><a href="/CW/mydoc_audio_dir/">audio_dir</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_audio_filename/">audio_filename</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_author/">author</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_book_dir/">book_dir</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_command_line/">command_line</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_double_words/">double_words</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_effective_wpm/">effective_wpm</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_ewpm/">ewpm</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_frequency/">frequency</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_name/">name</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_no_noise/">no_noise</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_noise/">noise</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_print_letters/">print_letters</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_quality/">quality</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_shuffle/">shuffle</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_title/">title</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_use_ebook2cw/">use_ebook2cw</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_use_ruby_tone/">use_ruby_tone</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_word_spacing/">word_spacing</a></li>
            
            
            
            
            
            
            <li><a href="/CW/mydoc_wpm/">wpm</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Source</a>
        <ul>
            
            
            
            <li><a href="https://github.com/mjago/cw/" target="_blank">Repository</a></li>
            
            
            
            
            
            
            <li><a href="/CW/doc/index.html">Source Docs</a></li>
            
            
            
            
            
            
            <li><a href="/CW/doc/class_diagram.svg" target="_blank">Class Diagram</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Sidebar Source</h1>
</div>



<div class="post-content">

   
    <div class="summary">The sidebar navigation uses a jQuery component called Navgoco. The sidebar is a somewhat complex part of the theme that remembers your current page, highlights the active item, stays in a fixed position on the page, and more. This page explains a bit about how the sidebar was put together.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    

  <h2 id="navgoco-foundation">Navgoco foundation</h2>

<p>The sidebar uses the <a href="https://github.com/tefra/navgoco">Navgoco jQuery plugin</a> as its basis. Why not use Bootstrap? Navgoco provides a few features that I couldn’t find in Bootstrap:</p>

<ul>
  <li>Navgoco sets a cookie to remember the user’s position in the sidebar. If you refresh the page, the cookie allows the plugin to remember the state.</li>
  <li>Navgoco inserts an <code class="highlighter-rouge">active</code> class based on the navigation option that’s open. This is essential for keeping the accordion open.</li>
  <li>Navgoco includes the expand and collapse features of a sidebar.</li>
</ul>

<p>In short, the sidebar has some complex logic here. I’ve integrated Navgoco’s features with the sidebar.html and sidebar data files to build the sidebar. It’s probably the most impressive part of this theme. (Other themes usually aren’t focused on creating hierarchies of pages, but this kind of hierarchy is important in a documentation site.)</p>

<h2 id="accordion-sidebar-feature">Accordion sidebar feature</h2>

<p>The sidebar.html file (inside the _includes folder) contains the <code class="highlighter-rouge">.navgoco</code> method called on the <code class="highlighter-rouge">#mysidebar</code> element.</p>

<p>There are some options to set within the <code class="highlighter-rouge">.navgoco</code> method. The only noteworthy option is <code class="highlighter-rouge">accordion</code>. This option makes it so when you expand a section, the other sections collapse. It’s a way of keeping your navigation controls condensed.</p>

<p>The value for <code class="highlighter-rouge">accordion</code> is a Boolean (<code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>). By default, the <code class="highlighter-rouge">accordion</code> option is set as <code class="highlighter-rouge">true</code>. If you don’t want the accordion, set it to <code class="highlighter-rouge">false</code>. Note that there’s also a block of code near the bottom of sidebar.html that is commented out. Uncomment out that section to have the Collapse all and Expand All buttons appear.</p>

<p>There’s a danger with setting the accordion to <code class="highlighter-rouge">false</code>. If you click Expand All and the sidebar expands beyond the dimensions of the browser, users will be stuck. When that happens, it’s hard to collapse it. As a best practice, leave the sidebar’s accordion option set to <code class="highlighter-rouge">true</code>.</p>

<h2 id="fixed-position-sidebar">Fixed position sidebar</h2>

<p>The sidebar has one other feature — this one from Bootstrap. If the user’s viewport is tall enough, the sidebar remains fixed on the page. This allows the user to scroll down the page and still keep the sidebar in view.</p>

<p>In the customsscripts.js file in the js folder, there’s a function that adds an <code class="highlighter-rouge">affix</code> class if the height of the browser window is greater than 800 pixels. If the browser’s height is less than 800 pixels, the <code class="highlighter-rouge">nav affix</code> class does not get inserted. As a result, the sidebar can slide up and down as the user scrolls up and down the page.</p>

<p>Depending on your content, you may need to adjust <code class="highlighter-rouge">800</code> pixel number. If your sidebar is so long that having it in a fixed position makes it so the bottom of the sidebar gets cut off, increase the <code class="highlighter-rouge">800</code> pixel number here to a higher number.</p>

<h2 id="opening-sidebar-links-into-external-pages">Opening sidebar links into external pages</h2>

<p>In the attributes for each sidebar item, if you use <code class="highlighter-rouge">external_url</code> instead of <code class="highlighter-rouge">url</code>, the theme will insert the link into an <code class="highlighter-rouge">a href</code> element that opens in a blank target.</p>

<p>For example, the sidebar.html file contains the following code:</p>

<div class="language-liquid highlighter-rouge"><pre class="highlight"><code> <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">subfolderitem</span><span class="p">.</span><span class="nv">external_url</span><span class="w"> </span><span class="p">%}</span>
&lt;li&gt;&lt;a href="<span class="p">{{</span><span class="nv">subfolderitem</span><span class="p">.</span><span class="nv">external_url</span><span class="p">}}</span>" target="_blank"&gt;<span class="p">{{</span><span class="nv">deeplevel</span><span class="p">.</span><span class="nv">title</span><span class="p">}}</span>&lt;/a&gt;&lt;/li&gt;
</code></pre>
</div>

<p>You can see that the <code class="highlighter-rouge">external_url</code> is a condition that applies a different formatting. Although this feature is available, I recommend putting any external navigation links in the top navigation bar instead of the side navigation bar.</p>

<h2 id="sidebar-item-highlighting">Sidebar item highlighting</h2>

<p>The sidebar.html file inserts an <code class="highlighter-rouge">active</code> class into the sidebar element when the <code class="highlighter-rouge">url</code> attribute in the sidebar data file matches the page URL.</p>

<p>For example, the sidebar.html file contains the following code:</p>

<div class="language-liquid highlighter-rouge"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="kr">elsif</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">subfolderitem</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">%}</span>
  &lt;li class="active"&gt;&lt;a href="<span class="p">{{</span><span class="nv">subfolderitem</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">prepend</span><span class="p">:</span><span class="w"> </span>site.baseurl<span class="p">}}</span>"&gt;<span class="p">{{</span><span class="nv">subfolderitem</span><span class="p">.</span><span class="nv">title</span><span class="p">}}</span>&lt;/a&gt;&lt;/li&gt;
</code></pre>
</div>

<p>If the <code class="highlighter-rouge">page.url</code> matches the <code class="highlighter-rouge">subfolderitem.url</code>, then an <code class="highlighter-rouge">active</code> class gets applied. If not, the <code class="highlighter-rouge">active</code> class does not get applied.</p>

<p>The <code class="highlighter-rouge">page.url</code> in Jekyll is a site-wide variable. If you insert <code class="highlighter-rouge"><span class="p">{</span><span class="err">{page.url</span><span class="p">}</span><span class="err">}</span></code> on a page, it will render as follows: /mydoc_sidebar_source/. The <code class="highlighter-rouge">url</code> attribute in the sidebar item must match the page URL in order to get the <code class="highlighter-rouge">active</code> class applied.</p>

<p>This is why the <code class="highlighter-rouge">url</code> value in the sidebar data file looks something like this:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code>    <span class="pi">-</span> <span class="s">title</span><span class="pi">:</span> <span class="s">Understanding how the sidebar works</span>
      <span class="s">url</span><span class="pi">:</span> <span class="s">/mydoc_understand_sidebar/</span> 
      <span class="s">output</span><span class="pi">:</span> <span class="s">web, pdf</span>
</code></pre>
</div>

<p>Note that the url does not include the project folder where the file is stored. This is because the site uses permalinks, which pulls the topics out of subfolders and places them into the root directory when the site builds.</p>

<p>Now the page.url and the item.url can match and the <code class="highlighter-rouge">active</code> class can get applied. With the <code class="highlighter-rouge">active</code> class applied, the sidebar section remains open.</p>


<div class="tags">
    
    <b>Tags: </b>
    
    
    
    <a href="/CW/tag_getting_started" class="btn btn-default navbar-btn cursorNorm" role="button">getting_started</a>
    
    
    
</div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 <a href="http://martynjago.co.uk" target="_blank">Martyn Jago</a>. All rights reserved. <br />
<p>Page last updated:</span> March 20, 2016<br/> Site last generated: Sep 9, 2016 <br />
<p><img src="/CW/images/key.jpg" alt="key.jpg" style="width: 150px;" /></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
    <!-- <script> -->
    <!-- jQuery(function ($) { -->
    <!--     $('.post-content').annotator() -->
    <!--             .annotator('setupPlugins', {tokenUrl: 'http://example.com/api/token'}) -->
    <!-- }); -->
    <!-- </script> -->
</body>

</html>
